<div fxFlex="100" class="contentBorder marginT15">
    <div [ngClass]="'formHeader'" fxLayout="row">
        <div fxFlex fxLayoutAlign="start">
            <span class="formHeaderTitle">Shipment Lines :</span>
        </div>
    </div>
    <div fxLayout="row">
        <mat-divider fxFlex="100"></mat-divider>
    </div>

    <!-- <div class="padding15"> -->
    <div class="formContainer" fxLayout="column">
        <form #shipmentForm="ngForm" id="ngForm" [formGroup]="EligibleShipmentForm"
            (ngSubmit)="onSubmit($event, shipmentForm)" autocomplete="off">
            <div class="container" fxLayout="column">
                <div fxLayout="row" fxLayoutGap="20px">
                    <div class="item-head" fxFlex="28" style="padding-right:20px; ">Shipment</div>
                    <div class="item-head" fxFlex="44" style="padding-right:20px; ">Customer</div>
                    <div class="item-head" fxFlex="28" style="padding-right:20px; ">Date</div>
                </div>

                <div fxLayout="row" fxLayoutGap="20px">
                    <div fxFlex="28">
                        <div fxLayout="row">
                            <mat-form-field class="materailFieldSize" fxFlex="33" style="padding-right:20px;">
                                <input matInput [disabled]="isEdit" placeholder="Shipment Number"
                                    formControlName="shipmentNumber" autocomplete="off" />
                            </mat-form-field>
                            <mat-form-field class="materailFieldSize" fxFlex="35" style="padding-right:20px;">
                                <mat-select formControlName="shipmentIuId" placeholder="IU"
                                    [ngClass]="'materailFieldSize pointerEventnone selectArrowHide'">
                                    <mat-option *ngFor="let element of iuCodeList" [value]="element.value">
                                        {{element.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field class="materailFieldSize" fxFlex="32">
                                <input matInput [disabled]="isEdit" placeholder="Status"
                                    formControlName="shipmentStatusValue" autocomplete="off" />
                            </mat-form-field>
                        </div>
                    </div>

                    <div fxFlex="41">
                        <div fxLayout="row">
                            <mat-form-field class="materailFieldSize" fxFlex="33" style="padding-right:20px;">
                                <input matInput (keydown)="fetchNewSearchListForCustomer($event, null, false)"
                                    (blur)="fetchNewSearchListForCustomer($event, null, false)"
                                    placeholder="Search Customer" formControlName="customerSearchValue"
                                    autocomplete="off" />
                            </mat-form-field>
                            <mat-form-field class="materailFieldSize" fxFlex="33" style="padding-right:0px;">
                                <input matInput formControlName="customerSiteName" placeholder="Customer Site"
                                    [ngClass]="isEdit ? 'pointerEventnone selectArrowHide':''" [disabled]="isEdit"
                                    autocomplete="off" />
                            </mat-form-field>
                            <mat-form-field class="materailFieldSize" fxFlex="34" style="padding-left:20px;">
                                <input matInput formControlName="locCode" placeholder="Stagging Locator"
                                    [ngClass]="isEdit ? 'pointerEventnone selectArrowHide':''" [disabled]="true"
                                    autocomplete="off" />
                            </mat-form-field>
                        </div>
                    </div>

                    <div fxFlex="28">
                        <div fxLayout="row">
                            <mat-form-field fxFlex="50" style="padding-right:20px; ">
                                <input matInput [matDatepicker]="fromDate" (click)="fromDate.open()" [min]="systemDate"
                                    style="color: #5b5b5b" placeholder="Actual Ship Date"
                                    formControlName="actualShipDate" (ngModelChange)="onStartDateChanged()"
                                    (click)="this.commonService.disableInput($event)"
                                    on-focus="this.commonService.disableInput($event)" />
                                <mat-datepicker-toggle matSuffix [for]="fromDate"></mat-datepicker-toggle>
                                <mat-datepicker #fromDate></mat-datepicker>
                            </mat-form-field>
                            <mat-form-field fxFlex="50">
                                <input matInput [matDatepicker]="toDate" (click)="toDate.open()" [min]="setEndDate"
                                    placeholder="Actual Delivery Date" formControlName="actualDeliveryDate"
                                     [disabled]='isEndDateDisabled'
                                    (click)="this.commonService.disableInput($event)"
                                    on-focus="this.commonService.disableInput($event)" />
                                <mat-datepicker-toggle matSuffix [for]="toDate"></mat-datepicker-toggle>
                                <mat-datepicker #toDate></mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>
                </div>

                <div fxLayout="row" fxLayoutGap="20px">
                    <div class="item-head" fxFlex="49" style="padding-right:20px;">Freight</div>
                    <div class="item-head" fxFlex="49" style="padding-right:20px;">Weight/Volume</div>
                </div>

                <div fxLayout="row" fxLayoutGap="20px">
                    <div fxFlex="49" fxLayoutGap="20px" style="padding-right:20px;">
                        <mat-form-field class="materailFieldSize" fxFlex="33.33">
                            <input matInput placeholder="Carrier" formControlName="shipmentCarrier" />
                        </mat-form-field>
                        <mat-form-field class="materailFieldSize" fxFlex="33.33">
                            <input matInput placeholder="Waybill" formControlName="shipmentWaybill" />
                        </mat-form-field>
                        <mat-form-field class="materailFieldSize" fxFlex="33.33">
                            <input matInput placeholder="Bol" formControlName="shipmentBol" />
                        </mat-form-field>
                    </div>
                    <div fxFlex="49" fxLayoutGap="20px" style="padding-right:20px;">
                        <mat-form-field class="materailFieldSize dimensions" fxFlex="32">
                            <input type="text" matInput placeholder="Net Weight" min="1" class='example-right-align'
                                (keypress)="commonService.isDecimal($event)" formControlName="netWeight" />
                            <span matSuffix class='bold'>{{shipmentWeightUom}}</span>
                        </mat-form-field>
                        <mat-form-field class="materailFieldSize dimensions" fxFlex="32">
                            <input type="text" matInput placeholder="Gross Weight" min="1"
                                (keypress)="commonService.isDecimal($event)" formControlName="grossWeight" />
                            <span matSuffix class='bold'>{{shipmentWeightUom}}</span>
                        </mat-form-field>
                        <mat-form-field class="materailFieldSize dimensions" fxFlex="32">
                            <input type="text" matInput placeholder="Volume" min="1"
                                (keypress)="commonService.isDecimal($event)" formControlName="volume" />
                            <span matSuffix class='bold'>{{shipmentVolumeUom}}</span>
                        </mat-form-field>
                    </div>
                </div>
            </div>
        </form>




        <div class="marginT15" fxLayout="row">
            <div fxFlex fxLayoutAlign="start">
                <span class="formHeaderTitle">Lines : </span>
            </div>
            <div fxLayoutAlign="end">

            </div>
        </div>

        <div [id]="'customTable'"
            [ngClass]="!shipmentLineDataSource.data.length || listProgress ? 'customTable ellipsisTable scrollHide' : 'customTable ellipsisTable mb15'"
            [ngStyle]="{'max-width': '100%','max-height': commonService.screenMaxHeight }">
            <table mat-table [dataSource]="shipmentLineDataSource" matSort class="resize-table"
                style="min-width: 2400px;">
                <ng-container matColumnDef="No">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'cursor-auto mat-header-column-'+columns[0].field">
                        {{ columns[0].name }}
                    </th>
                    <td mat-cell *matCellDef="let element; let i = index;">
                        {{i + 1}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="soNumber">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[1].field"
                        (mousedown)="commonService.onResizeColumn($event, 1, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[1].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element ; let i=index">
                        <div *ngIf="element.addNewRecord">
                            <div fxLayout="row" *ngIf="element.inlineSearchLoader === 'hide'">
                                <div fxFlex="80">
                                    <mat-form-field *ngIf="element.showLov === 'show'" autofocus>
                                        <mat-select [(ngModel)]="element.soId" placeholder="" required>
                                            <mat-option *ngFor="let soData of element.soList" [value]="soData.value"
                                                (onSelectionChange)="soSelectionChanged($event, paginator.pageSize * paginator.pageIndex + i, soData)">
                                                {{ soData.label }}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="element.soId === ''">Please select sales order</mat-error>
                                    </mat-form-field>
                                    <mat-form-field *ngIf="element.showLov === 'hide'">
                                        <input matInput
                                            (keydown)="fetchNewSearchList($event, paginator.pageSize * paginator.pageIndex + i, false, element.searchValue)"
                                            (blur)="fetchNewSearchList($event, paginator.pageSize * paginator.pageIndex + i, false, element.searchValue)"
                                            placeholder="Search sales order" [(ngModel)]="element.searchValue"
                                            autocomplete="off" required />
                                    </mat-form-field>
                                </div>
                                <div fxFlex="20">
                                    <div [ngClass]="'pt-15'">
                                        <button class="searchBtn icon-search" matTooltip="Search"
                                            [matTooltipPosition]="tooltipPosition"
                                            (click)="fetchNewSearchList($event, paginator.pageSize * paginator.pageIndex + i, true, element.searchValue)">
                                        </button>
                                    </div>
                                </div>

                            </div>
                            <div fxLayout="row" *ngIf="element.inlineSearchLoader === 'show'">
                                <div fxFlex="100">Searching...</div>
                            </div>


                        </div>
                        <div *ngIf="!element.addNewRecord">
                            <span [ngClass]="'nonEditiableField'" style="pointer-events: none;"
                                class="maxWidthSelect setWidth">
                                <span>{{element.soNumber ? element.soNumber : '-'}}</span>
                            </span>
                        </div>

                    </td>
                </ng-container>
                <ng-container matColumnDef="soLineNumber">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[2].field"
                        (mousedown)="commonService.onResizeColumn($event, 2, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[2].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element; let i=index">
                        <div *ngIf="element.addNewRecord">
                            <mat-form-field [ngClass]="'inputMarginClass'">
                                <mat-select [(ngModel)]="element.soLineId">
                                    <mat-option *ngFor="let soLine of element.soLineList" [value]="soLine.value"
                                        (onSelectionChange)="soLineSelectionChanged($event, paginator.pageSize * paginator.pageIndex + i, soLine)">
                                        {{soLine.label}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div *ngIf="!element.addNewRecord">
                            <span [ngClass]="'nonEditiableField'" style="pointer-events: none;"
                                class="maxWidthSelect setWidth">
                                <span>{{element.soLineNumber ? element.soLineNumber : '-'}}</span>
                            </span>
                        </div>

                    </td>
                </ng-container>

                <ng-container matColumnDef="itemName">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[3].field"
                        (mousedown)="commonService.onResizeColumn($event, 3, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[3].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <span>{{element.itemName ? element.itemName : '-'}}</span>
                    </td>
                </ng-container>
                <ng-container matColumnDef="revsnNumber">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[4].field"
                        (mousedown)="commonService.onResizeColumn($event, 4, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[4].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.revsnNumber ? element.revsnNumber :
                                '-'}}</span>
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="shipmentQty">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[5].field"
                        (mousedown)="commonService.onResizeColumn($event, 5, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[5].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                        <div *ngIf="element.addNewRecord">
                            <mat-form-field [ngClass]="'inputMarginClass'">
                                <input matInput [(ngModel)]="element.shipmentQty"
                                    (keypress)="commonService.isDecimal($event)" autocomplete="off">
                            </mat-form-field>
                        </div>
                        <div *ngIf="!element.addNewRecord">
                            <span [ngClass]="'nonEditiableField'" style="pointer-events: none;"
                                class="maxWidthSelect setWidth">
                                <span>{{element.shipmentQty ? element.shipmentQty : '-'}}</span>
                            </span>
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="UOM">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[6].field"
                        (mousedown)="commonService.onResizeColumn($event, 6, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[6].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.qtyUomCode ? element.qtyUomCode :
                                '-'}}</span>
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="shippedQty">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[7].field"
                        (mousedown)="commonService.onResizeColumn($event, 7, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[7].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.shippedQty ? element.shippedQty :
                                '-'}}</span>
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="soShipmentPlannedDate">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[8].field"
                        (mousedown)="commonService.onResizeColumn($event, 8, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[8].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.soShipmentPlannedDate ?
                                (element.soShipmentPlannedDate | date) : '-' }}</span>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[9].field"
                        (mousedown)="commonService.onResizeColumn($event, 9, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[9].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.shipmentLineStatusValue ?
                                element.shipmentLineStatusValue : '-'}}</span>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="netWeight">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[10].field"
                        (mousedown)="commonService.onResizeColumn($event, 10, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[10].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.netWeight ? element.netWeight : '-'}}</span>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="grossWeight">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[11].field"
                        (mousedown)="commonService.onResizeColumn($event, 11, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[11].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.grossWeight ? element.grossWeight :
                                '-'}}</span>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="weightUom">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[12].field"
                        (mousedown)="commonService.onResizeColumn($event, 12, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[12].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.weightUom ? element.weightUom : '-'}}</span>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="volume">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[13].field"
                        (mousedown)="commonService.onResizeColumn($event, 13, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[13].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.volume ? element.volume : '-'}}</span>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="volumeUom">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[14].field"
                        (mousedown)="commonService.onResizeColumn($event, 14, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[14].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.volumeUom ? element.volumeUom : '-'}}</span>
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="allocatedQty">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[15].field"
                        (mousedown)="commonService.onResizeColumn($event, 15, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[15].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.allocatedQty ? element.allocatedQty :
                                '-'}}</span>
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="backorderQty">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[16].field"
                        (mousedown)="commonService.onResizeColumn($event, 16, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[16].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.backorderQty ? element.backorderQty :
                                '-'}}</span>
                        </div>
                    </td>
                </ng-container>
                <ng-container matColumnDef="pickedQty">
                    <th mat-header-cell *matHeaderCellDef [ngClass]="'mat-header-column-'+columns[17].field"
                        (mousedown)="commonService.onResizeColumn($event, 17, columns, matTableRef)">
                        <span mat-sort-header>{{ columns[17].name }}</span>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <div>
                            <span [ngClass]="'nonEditiableField'">{{element.pickedQty ? element.pickedQty : '-'}}</span>
                        </div>
                    </td>
                </ng-container>
                

                <ng-container matColumnDef="action" stickyEnd>
                    <th mat-header-cell *matHeaderCellDef
                        [ngClass]="'cursor-auto actionColumn mat-header-column-'+columns[18].field">
                        {{ columns[18].name }}
                    </th>
                    <td mat-cell *matCellDef="let element; let i=index" [ngClass]="'actionIcons'">
                        <div fxLayout="row" fxLayoutGap="5px" fxLayoutAlign="center center">
                            <span *ngIf="element.addNewRecord && !element.isDefault " [ngClass]="'padding0'">
                                <span class="icon-clear" (click)="deleteRow(element, i)" matRipple matTooltip="Cancel"
                                    [matTooltipPosition]="tooltipPosition" [matRippleColor]="'#098ccd3b'"
                                    [matRippleCentered]="true" [matRippleRadius]="false"></span>
                            </span>
                            <!-- <span *ngIf="!element.addNewRecord" class="icon-delete"
                                matRipple matTooltip="Delete"
                            (click)= "openDeleteDialog(myDialog , element,$event, paginator.pageSize * paginator.pageIndex + i )"
                            [matTooltipPosition]="tooltipPosition" [matRippleColor]="'#098ccd3b'"
                            [matRippleCentered]="true" [matRippleRadius]="false">
                        </span> -->
                            <span [ngClass]="'padding0'">
                                <div class="icon-direct" (click)="openContentDialog(myContentDialog, element)" [ngClass]="disableAllBtn ? 'disableBtn' : ''" 
                                    matRipple matTooltip="Shipment Content" [matTooltipPosition]="tooltipPosition"
                                    [matRippleColor]="'#098ccd3b'" [matRippleCentered]="true"
                                    [matRippleRadius]="false"></div>
                            </span>

                        </div>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="shipmentLineDisplayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: shipmentLineDisplayedColumns;"></tr>
            </table>
            <ng-container *ngIf="listProgress">
                <mat-spinner [diameter]="40" [ngClass]="'loaderSpinner'"></mat-spinner>
            </ng-container>
            <ng-container *ngIf="!shipmentLineDataSource.data.length && !listProgress">
                <div [ngClass]="'noDataFound'">
                    <small>{{ lineTableMessage }}</small>
                </div>
            </ng-container>
        </div>
        <div class="text-align-right">
            <!-- <button *ngIf='shipmentStatus !== "SHIPPED" ' mat-stroke-button
                class="orangeButtonBorder border-radius-3 colorAttribute marginT5" color="primary" (click)="addRow()"
                matTooltip="Add Row">
                Add Row
            </button> -->
        </div>
        <div fxLayout="row" fxLayoutAlign="space-between center">
            <div>


                <button mat-flat-button [disabled]="shipmentStatus !== 'READY_TO_SHIP' "
                    [ngClass]="saveInprogress ? 'saveInprogress formButton saveButton mr10' : 'formButton saveButton mr10'"
                    (click)="openShipShipmentPopup($event,report,'ship')">
                    Ship
                </button>
                <button [disabled]="shipmentStatus !== 'SHIPPED' " mat-flat-button
                    [ngClass]="saveInprogress ? 'saveInprogress formButton saveButton mr10' : 'formButton saveButton mr10'"
                    (click)="openShipShipmentPopup($event,report,'report')">
                    Report
                </button>

                <!-- <button *ngIf="isEdit" [disabled]='true' mat-flat-button
                    [ngClass]="saveInprogress ? 'saveInprogress formButton saveButton mr10' : 'formButton saveButton mr10'"
                    (click)="onSubmit($event, shipmentForm)">
                    Update
                </button> -->
                <button mat-flat-button [ngClass]="'formButton saveButton mr10'"
                    (click)="commonService.openConfirmationDialog('shipment','shipment')">
                    Cancel
                </button>
            </div>
            <mat-paginator (page)="commonService.setPaginationSize($event)" showFirstLastButtons
                [ngClass]="'mat-paginator-sticky'">
            </mat-paginator>
        </div>
    </div>

</div>

<ng-template #myContentDialog>
    <div mat-dialog-container>
        <div fxLayout="row" fxLayoutGap="10px" mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle
            class="messageHeaderTitle mat-dialog-title removePadding ">
            <div fxFlex="95" fxLayoutGap="10px"><span class="viewDialogTitle mt5">Shipment Content</span></div>
            <div fxFlex="5" fxLayoutGap="10px">
                <button mat-icon-button (click)='closeDialog()'>
                    <mat-icon class="viewDialogCloseIcon" mat-list-icon>close</mat-icon>
                </button>
            </div>
        </div>

        <div mat-dialog-content>
            <div class="container" fxLayout="column">

                <div class="customTable"
                    [ngClass]="!parameterDataSourceBatch.data.length || listProgressPopup ? 'setScroll' : 'setScroll'">
                    <table mat-table [dataSource]="parameterDataSourceBatch">
                        <ng-container matColumnDef="No">
                            <th mat-header-cell *matHeaderCellDef class="width50">
                                <span>#</span>
                            </th>
                            <td mat-cell *matCellDef="let element; let i = index;">
                                <div>
                                    <span [ngClass]="'nonEditiableField'">
                                        {{ paginator.pageSize * paginator.pageIndex + i + 1 }} </span>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="lpnNum">
                            <th mat-header-cell *matHeaderCellDef class="setWith15Percent">LPN Number</th>
                            <td mat-cell *matCellDef="let element;   ">
                                <div>
                                    <span [ngClass]="'nonEditiableField'">
                                        {{ element.lpnNum ? element.lpnNum : '-' }}
                                    </span>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="contentQty">
                            <th mat-header-cell *matHeaderCellDef class="setWith15Percent">Content Qty</th>
                            <td mat-cell *matCellDef="let element;   ">
                                <div>
                                    <span [ngClass]="'nonEditiableField'">
                                        {{ element.contentQty ? element.contentQty : '-' }}
                                    </span>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="paletNum">
                            <th mat-header-cell *matHeaderCellDef class="setWith15Percent">Pallet Number</th>
                            <td mat-cell *matCellDef="let element;   ">
                                <div>
                                    <span [ngClass]="'nonEditiableField'">
                                        {{ element.paletNum ? element.paletNum : '-' }}
                                    </span>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="qtyUomCode">
                            <th mat-header-cell *matHeaderCellDef class="setWith100px">UOM</th>
                            <td mat-cell *matCellDef="let element;   ">
                                <div>
                                    <span [ngClass]="'nonEditiableField'">
                                        {{ element.qtyUomCodeValue ? element.qtyUomCodeValue : '-' }}
                                    </span>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="batchCount" >
                            <th mat-header-cell *matHeaderCellDef class="cursor-auto text-center setWith100px">
                                <span class="center-align">Batch</span>
                            </th>
                            <td mat-cell *matCellDef="let element;">
                                <div fxLayout="row" fxLayoutAlign="center">
                                    <span>
                                        <span *ngIf="element.batchCount <= 9" (click)='openBatchPopup(myDialog, element)'  [ngClass]="batchSerialDialogProcess ? 'pointerEventnone badge1' : 'badge1'">{{element.batchCount}}</span>
                                        <span *ngIf="element.batchCount > 9"  (click)='openBatchPopup(myDialog, element)'  [ngClass]="batchSerialDialogProcess ? 'pointerEventnone badge2' : 'badge2'">{{element.batchCount}}</span>
                                    </span>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="serialCount" >
                            <th mat-header-cell *matHeaderCellDef  class="cursor-auto text-center setWith100px">
                                <span class="center-align">Serial</span>
                            </th>
                            <td mat-cell *matCellDef="let element;">
                                <div fxLayout="row" fxLayoutAlign="center">
                                    <span >
                                        <span *ngIf="element.serialCount <= 9" (click)='openSerialPopup(myDialog, element)' [ngClass]="batchSerialDialogProcess ? 'pointerEventnone badge1' : 'badge1'">{{element.serialCount}}</span>
                                        <span *ngIf="element.serialCount > 9"  (click)='openSerialPopup(myDialog, element)' [ngClass]="batchSerialDialogProcess ? 'pointerEventnone badge2' : 'badge2'">{{element.serialCount}}</span>
                                    </span>
                                </div>
                            </td>
                        </ng-container>



                        <tr mat-header-row *matHeaderRowDef="parameterDisplayedColumnsBatch"></tr>
                        <tr mat-row *matRowDef="let row; columns: parameterDisplayedColumnsBatch;"></tr>
                    </table>
                    <ng-container *ngIf="listProgressPopup">
                        <mat-spinner [diameter]="40" [ngClass]="'loaderSpinner'"></mat-spinner>
                    </ng-container>

                    <ng-container *ngIf="!parameterDataSourceBatch.data.length && !listProgressPopup ">
                        <div [ngClass]="'positionRelative'" style="min-height:50px;">
                            <div [ngClass]="'noDataFound'"><small>{{contentTableMessage}}</small></div>
                        </div>
                    </ng-container>
                </div>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div [ngClass]="'formContainer'"></div>
                    <mat-paginator (page)="commonService.setPaginationSize($event)" #paginatorBatch showFirstLastButtons
                        [ngClass]="'mat-paginator-sticky'">
                    </mat-paginator>
                </div>
            </div>
        </div>

    </div>
</ng-template>


<ng-template #report>
    <h1 class="viewDialogHeader" mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>
        <div fxLayout="row" fxLayoutGap="10px">
            <div fxFlex="85" fxLayoutGap="10px" style="padding-top: 4px;">
                <span *ngIf='!isReport' class="viewDialogTitle">Select Reports to Generate</span>
                <span *ngIf='isReport' class="viewDialogTitle">View Reports</span>
            </div>
            <div fxFlex="15" fxLayoutGap="10px">
                <button mat-icon-button matDialogClose (click)='closeDialog()'>
                    <mat-icon class="viewDialogCloseIcon" mat-list-icon>close</mat-icon>
                </button>
            </div>
        </div>
    </h1>
    <div mat-dialog-content [ngClass]="'pb-24'">
        <div class="container" fxLayout="column" *ngIf='!isReport'>
            <div fxLayout="column"
                style="padding-top: 10px; padding-bottom: 30px; max-height: 150px; overflow-y: auto;">
                <span class="no-screen-found" *ngIf='!editData.shippingReports.length'>No report found</span>
                <mat-checkbox *ngFor="let report of editData.shippingReports" [(ngModel)]='report.enableFlag'
                    class="searchBoxLabel" fxFlex="25">{{report.reportName}}
                </mat-checkbox>
            </div>
            <button style="width: 50px; margin-bottom: 20px; margin-top: 20px;" mat-flat-button
                [ngClass]="saveInprogress ? 'saveInprogress formButton saveButton mr10' : 'formButton saveButton mr10'"
                (click)="shipShipment($event)">
                Ship
            </button>
        </div>
        <div class="container" fxLayout="column" *ngIf='isReport'>
            <div fxLayout="column"
                style="padding-top: 10px; padding-bottom: 30px; max-height: 150px; overflow-y: auto;">
                <span class="no-screen-found" *ngIf='!editData.shippingReports.length'>No report found</span>
                <div class="no-screen-found" style="font-size: 14px;"
                    *ngFor="let report of editData.shippingReports; let i = index;"> - {{report.reportName}}</div>
            </div>
        </div>
    </div>

</ng-template>


<ng-template #myDialog>
    <h1 class="viewDialogHeader" mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>
        <div fxLayout="row" fxLayoutGap="10px">
            <div fxFlex="90" fxLayoutGap="10px"><span class="viewDialogTitle">{{ isBatch ? 'Batch' : 'Serial'}}</span></div>
            <div fxFlex="10" fxLayoutGap="10px">
                <button mat-icon-button matDialogClose>
                    <mat-icon class="viewDialogCloseIcon" mat-list-icon>close</mat-icon>
                </button>
            </div>
        </div>
    </h1>
    <div mat-dialog-content [ngClass]="'pb-24'" >
        <div class="container" fxLayout="column" *ngIf='isBatch'>
            <div [ngClass]="!parameterDataSourceBatchCount.data.length || listProgress ? 'customTable ' : 'customTable'">
                <table mat-table [dataSource]="parameterDataSourceBatchCount">
                    <ng-container matColumnDef="No">
                        <th mat-header-cell *matHeaderCellDef class="width50" >#</th>
                        <td mat-cell *matCellDef="let element; let i = index;">
                            <div>
                                <span [ngClass]="'nonEditiableField'">
                                    {{ paginatorBatch.pageSize * paginatorBatch.pageIndex + i +1 }}
                                </span>
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="batchNumber" >
                        <th mat-header-cell *matHeaderCellDef class="width135">Batch #</th>
                        <td mat-cell *matCellDef="let element;">
                            <div>
                                <span [ngClass]="'nonEditiableField'">
                                    {{ element.batchNumber }}
                                </span>
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="batchMfgDate">
                        <th mat-header-cell *matHeaderCellDef  class="width135">MFG Date</th>
                        <td mat-cell *matCellDef="let element;">
                            <div>
                                <span [ngClass]="'nonEditiableField'">
                                    {{ element.batchOriginationDate ? (element.batchOriginationDate | date) : '-' }}
                                </span>
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="batchExpDate">
                        <th mat-header-cell *matHeaderCellDef  class="width120">Expiry Date</th>
                        <td mat-cell *matCellDef="let element;">
                            <div>
                                <span [ngClass]="'nonEditiableField'">
                                    {{ element.batchExpirationDate ? (element.batchExpirationDate | date) : '-' }}
                                </span>
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="txnBatchQuantity">
                        <th mat-header-cell *matHeaderCellDef  class="width100">Quantity</th>
                        <td mat-cell *matCellDef="let element;">
                            <div>
                                <span [ngClass]="'nonEditiableField'">
                                    {{ element.txnBatchQuantity }}
                                </span>
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="serialList">
                        <th mat-header-cell *matHeaderCellDef  class="width100" style="text-align: center;" >Serial</th>
                        <td mat-cell *matCellDef="let element;">
                            <div fxLayout="row" fxLayoutAlign="center">
                                <span>
                                    <span *ngIf="element.serialList <= 9" (click)='openBatchSerialPopup(myDialog, element)'  class="badge1">{{element.serialList ? element.serialList : 0}}</span>
                                    <span *ngIf="element.serialList > 9"  (click)='openBatchSerialPopup(myDialog, element)'  class="badge2">{{element.serialList ? element.serialList : 0}}</span>
                                </span>
                            </div>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="parameterDisplayedColumnsBatchCount"></tr>
                    <tr mat-row *matRowDef="let row; columns: parameterDisplayedColumnsBatchCount;"></tr>
                </table>
                <ng-container *ngIf="listProgress">
                    <mat-spinner [diameter]="40" [ngClass]="'loaderSpinner'"></mat-spinner>
                </ng-container>

                <ng-container *ngIf="!parameterDataSourceBatch.data.length && !listProgress ">
                    <div [ngClass]="'positionRelative'" style="min-height:50px;">
                        <div [ngClass]="'noDataFound'"><small>{{batchTableMessage}}</small></div>
                    </div>
                </ng-container>
            </div>
            <div fxLayout="row" fxLayoutAlign="space-between center">
                <div [ngClass]="'formContainer'"></div>
                <mat-paginator (page)="commonService.setPaginationSize($event)"  #paginatorBatch showFirstLastButtons [ngClass]="'mat-paginator-sticky'">
                </mat-paginator>
            </div>
        </div>
        <div class="container" fxLayout="column" *ngIf='!isBatch'>
            <div [ngClass]="!parameterDataSourceSerial.data.length || listProgress ? 'customTable ' : 'customTable'">
                <table mat-table [dataSource]="parameterDataSourceSerial">
                    <ng-container matColumnDef="No">
                        <th mat-header-cell *matHeaderCellDef class="width100" >#</th>
                        <td mat-cell *matCellDef="let element; let i = index;"   >
                            <div>
                                <span [ngClass]="'nonEditiableField'"  >
                                    {{ paginatorSerial.pageSize * paginatorSerial.pageIndex + i +1 }}
                                </span>
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="serialNumber">
                        <th mat-header-cell *matHeaderCellDef  class="setWith15Percent">Serial #</th>
                        <td mat-cell *matCellDef="let element;   "  >
                            <div>
                                <span [ngClass]="'nonEditiableField'"  >
                                    {{ element.serialNumber }}
                                </span>
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="txnDate">
                        <th mat-header-cell *matHeaderCellDef  class="setWith15Percent">Transaction Date</th>
                        <td mat-cell *matCellDef="let element;   "  >
                            <div>
                                <span [ngClass]="'nonEditiableField'"  >
                                    {{ element.txnDate }}
                                </span>
                            </div>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="parameterDisplayedColumnsSerial; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: parameterDisplayedColumnsSerial;"></tr>
                </table>
                <ng-container *ngIf="listProgress">
                    <mat-spinner [diameter]="40" [ngClass]="'loaderSpinner'"></mat-spinner>
                </ng-container>

                <ng-container *ngIf="!parameterDataSourceSerial.data.length && !listProgress ">
                    <div [ngClass]="'positionRelative'" style="min-height: 50px;">
                        <div [ngClass]="'noDataFound'"><small>{{serialTableMessage}}</small></div>
                    </div>
                </ng-container>
            </div>
            <div fxLayout="row" fxLayoutAlign="space-between center">
                <div [ngClass]="'formContainer'"></div>
                <mat-paginator  (page)="commonService.setPaginationSize($event)"  #paginatorSerial showFirstLastButtons [ngClass]="'mat-paginator-sticky'">
                </mat-paginator>
            </div>
        </div>
    </div>
    <div *ngIf='isBackBtnEnable' class="padding15">
        <button mat-flat-button color="primary" (click)='backToBatchList()' class="formButton saveButton mr10">Back</button>
    </div>

</ng-template>